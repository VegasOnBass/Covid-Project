{% extends "covid_watch/layout.html" %}
{% load static %}

{% block body %}
<div class="intro">
    <h1 class="logo-header">
        <span class="logo">COVID</span>
        <span class="logo"><hr></span>
        <span class="logo">WATCH</span>        
    </h1>
</div>

<div style="text-align: right;margin-top: 5px;">
    <div>
        Take a quick quiz
    </div>    
   <a class="quiz-button" href="{% url 'quiz' %}"> Start </a>
</div>

<div class="banner">
    Welcome
</div>
<div style="text-align: center;">
    <img style="width: 75%;" src="{% static 'covid_watch/images/masked.jpeg' %}">
</div>

<br>

<div class="row">
    <div class="col-lg-6">
        <div class="box">
            <h3>About Us</h3>   
            
            <p>
                Covid Watch is a small organization here to supply basic information about the CoronaVirus disease. You'll Find
                helpful resources for testing and vaccines. Feel free to contact us with any questions or concerns.
            </p>

        </div>
    </div>

    <div class="col-lg-6">
        <div id="carouselExampleSlidesOnly" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img style="height: 359px;" src="{% static 'covid_watch/images/covid1.jpeg' %}" class="d-block w-100" alt="...">
              </div>
              <div class="carousel-item">
                <img style="height: 359px;" src="{% static 'covid_watch/images/covid2.jpeg' %}" class="d-block w-100" alt="...">
              </div>
              <div class="carousel-item">
                <img style="height: 359px;" src="{% static 'covid_watch/images/covid3.jpeg' %}" class="d-block w-100" alt="...">
              </div>
            </div>
          </div>
    </div>
</div>

<br>

<div style="text-align: center;">
    <iframe width="75%" height="315" src="https://www.youtube.com/embed/i0ZabxXmH4Y" title="YouTube video player" 
        frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
    </iframe>
</div>


<div style="text-align: center; margin-top: 15px;">
    <!-- Button trigger modal -->
    <button type="button" class="guide" data-toggle="modal" data-target="#maskGuide">
        Mask Guide
    </button>

    <!-- Modal -->
    <div class="modal fade" id="maskGuide" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Mask Guide</h5>
            </div>
            <div class="modal-body">
                <li>Everyone 2 years or older who is not fully vaccinated should wear a mask in indoor public places.</li>
                <li>In general, you do not need to wear a mask in outdoor settings.</li>
                    <ul>
                        <li>In areas with high numbers of COVID-19 cases, consider wearing a mask in crowded outdoor settings and for activities with close contact with others who are not fully vaccinated.</li>
                    </ul>
                <li>
                    People who have a condition or are taking medications that weaken their immune 
                    system may not be fully protected even if they are fully vaccinated. They should 
                    continue to take all precautions recommended for unvaccinated people, 
                    including wearing a well-fitted mask, until advised otherwise by their healthcare provider.
                </li>
                <li>
                    If you are fully vaccinated, to maximize protection and prevent possibly spreading 
                    COVID-19 to others, wear a mask indoors in public if you are in an area of substantial or high transmission.
                </li>
                <br>
                <p>
                    Wearing a mask over your nose and mouth is required on planes, buses, trains, and other forms 
                    of public transportation traveling into, within, or out of the United States and while indoors at U.S. 
                    transportation hubs such as airports and train stations. Travelers are not required to wear a mask in 
                    outdoor areas of a conveyance (like on open deck areas of a ferry or the uncovered top deck of a bus).
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
            </div>
        </div>
    </div>

    <!-- Button trigger modal -->
    <button type="button" class="guide" data-toggle="modal" data-target="#washHands">
        Wash Your Hands
    </button>

    <!-- Modal -->
    <div class="modal fade" id="washHands" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Wash Your Hands</h5>
            </div>
            <div class="modal-body">
                <li>Wash your hands often with soap and water for at least 20 seconds especially after you have been in a public place, or after blowing your nose, coughing, or sneezing.</li>
                <li>Itâ€™s especially important to wash your hands:
                    <ul>
                        <li>Before eating or preparing food</li>
                        <li>Before touching your face</li>
                        <li>After using the restroom</li>
                        <li>After leaving a public place</li>
                        <li>After blowing your nose, coughing, or sneezing</li>
                        <li>After handling your mask</li>
                        <li>After changing a diaper</li>
                        <li>After caring for someone sick</li>
                        <li>After touching animals or pets</li>
                    </ul>
                </li>
                <li>If soap and water are not readily available, use a hand sanitizer that contains at least 60% alcohol. Cover all surfaces of your hands and rub them together until they feel dry.</li>
                <li>Avoid touching your eyes, nose, and mouth with unwashed hands.</li>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
            </div>
        </div>
    </div>
</div>

<br>

<div class="row">
    <div class="col-lg-4">
        <div class="container box2">
            <div>
                <h4>Vaccines and Boosters</h4>
            </div>
            <div>
                <p>Find CoVid-19 vaccines and boosters near you</p>
            </div>
            <div style="margin-bottom: 10px;">
                <img class="vaccine" src="{% static 'covid_watch/images/magnifying_glass_2-removebg-preview.png' %}" alt="magnifying glass">
                <a href="https://www.vaccines.gov/">Find a vaccine near you</a>
            </div>
            <div style="margin-bottom: 10px;">
                <img class="vaccine" src="{% static 'covid_watch/images/phone-removebg-preview.png' %}" alt="phone">
                Call <b>1-800-232-0233</b>
            </div>
            <div style="margin-bottom: 10px;">
                <img class="vaccine" src="{% static 'covid_watch/images/chat-removebg-preview.png' %}" alt="chat">
                Text your <b>zip code</b> to <b>438829</b>
            </div>
        </div>

    </div>

    <div class="col-lg-2">

    </div>

    <div class="col-lg-6">
        <form id="form">
            <h3>Contact Us</h3>
            <div class="form-group">
                <input class="form-control"  type="text" id="name" placeholder="Name" autocomplete="off">
            </div>
            <div class="form-group">
                <input required class="form-control" type="email" id="email" placeholder="Email Address">
            </div>
            <div class="form-group">
                <input class="form-control" type="text" id="subject" placeholder="Subject">
            </div>
            <textarea required class="form-control" id="body" placeholder="Body"></textarea>
            <input id="send" type="submit" class="btn btn-primary"/>
        </form>
    </div>
</div>

<script src="{% static 'covid_watch/intro.js' %}" type="text/javascript"></script>

<script type="text/javascript">

    var sendBtn = document.getElementById('form');

    sendBtn.onsubmit = (sendEmail);

    function sendEmail(){
        console.log('here');

        fetch('/emails', {
            method: 'POST',
            headers:{
                'Content-Type':'application/json',
                'X-CSRFToken':csrftoken,
            },
            body:JSON.stringify({
                name: document.querySelector('#name').value,
                email: document.querySelector('#email').value,
                subject: document.querySelector('#subject').value,
                body: document.querySelector('#body').value
            })
            })
            .then(response => response.json())
            .then((data) =>{
                console.log('Success:', data);
                alert(data.message);
            })
            return false;
    }

    function getToken(name) {
                let cookieValue = null;
                if (document.cookie && document.cookie !== '') {
                    const cookies = document.cookie.split(';');
                    for (let i = 0; i < cookies.length; i++) {
                        const cookie = cookies[i].trim();
                        if (cookie.substring(0, name.length + 1) === (name + '=')) {
                            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                            break;
                        }
                    }
                }
                return cookieValue;
    }
    const csrftoken = getToken('csrftoken');
</script>
{% endblock %}